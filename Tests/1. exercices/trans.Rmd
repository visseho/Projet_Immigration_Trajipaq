---
title: "trans"
author: "Thea"
date: "2023-05-09"
output: html_document
---

```{r}

library(tidyverse)

library(nycflights13)

```

# Exemples

## tybble

```{r}

nycflights13::flights

```

## filter

```{r}

(jan <- filter(flights, month == 1, day == 1))

```

## arrange

```{r}

arrange(flights, year, month, day)

```

## desc

```{r}

arrange(flights, desc(arr_delay))

```

## select (inclusive)

```{r}

select(flights, year : day)

```

## select (exclusive)

```{r}

select(flights, !(year : day))

```

## rename

```{r}

rename(flights, tail_num = tailnum)

```

## everything

```{r}

select(flights, air_time, distance, everything())

```


# Exercices

## 1 : affichez les vols retardés de deux heurs ou plus

```{r}

filter(flights, 
       arr_delay >= 2, 
       dest == "IAH" | origin == "HOU", 
       carrier == "UA" | carrier == "AA" | carrier == "DL",
       month %in% c(7, 8, 9),
       dep_delay <= 0,
       dep_time >= 0 & dep_time <= 600)

```

## 2 : simplifiez votre code avec between()

```{r}

?between

```


```{r}

filter(flights,
       arr_delay >= 2, 
       dest == "IAH" | origin == "HOU", 
       carrier == "UA" | carrier == "AA" | carrier == "DL",
       month %in% c(7, 8, 9),
       dep_delay <= 0,
       between(dep_time, 0, 600)
       )

```

## 3 : affichez les vols dont l'heure de départ est inconnue

```{r}

filter(flights, is.na(dep_time))

```

Ces colonnes représentent des vols annulés.

## 4 : question difficile à comprendre (voir manuel)

## 5 : classer les NA en tête de colonnes

```{r}

na <- arrange(flights, desc(is.na(dep_delay)))

```

## 6 : triez les vols par ordre décroissant de retard à l'arrivée et par ordre croissant d'heure du décollage

```{r}

arrange(flights, dep_time, desc(arr_delay))

```

## 7 : triez les vols selon leur vitesse

```{r}

arrange(flights, distance / air_time)

```

## 8 : quels vols ont parcourus la distance la plus grande et la plus courte ?

```{r}

arrange(flights, desc(distance))

``` 

```{r}

arrange(flights, distance)

```

## 9 : immaginez toutes les manières de séléctionner dep et arr

```{r}

# J'ai échoué !

select(flights, dep_time, dep_delay, arr_time, arr_delay)

```

## 10 : que se passe-t-il s'il on appelle plusieurs fois la même variable dans select() ?

La variable n’apparaît qu'une fois.

## 11 : quel est le rôle de la fonction one_of() ?

```{r}

vars <- c("year", "month", "day", "dep_delay", "arr_delay")

select(flights, one_of(vars))

```

## 12 : je n'ai pas compris la question

```{r}

?select

```

```{r}

select(flights, contains("time"))

```

